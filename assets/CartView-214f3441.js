/* empty css                 */import{_ as C,L as V,r as b,o as n,c,d as f,w as g,b as t,F as m,z as w,D as x,f as l,t as r,e as I,E as k,G as B}from"./index-f258c36f.js";import{S as d}from"./sweetalert2.all-d856edd8.js";import{_ as A}from"./loading-8b169b66.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/nail_",MODE:"production",DEV:!1,PROD:!0},T={data(){return{isLoading:!1,fullPage:!0,products:[],productId:"",cart:{},cartStatus:!1,loadingItem:""}},components:{Loading:V},methods:{getCarts(){this.$http.get(`${h}/api/${u}/cart`).then(s=>{this.cart=s.data.data,this.isLoading=!1,this.cart.carts.length===0?this.cartStatus=!1:this.cartStatus=!0}).catch(s=>{console.error(s)})},updatedCartItem(s){const i={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${h}/api/${u}/cart/${s.id}`,{data:i}).then(p=>{this.getCarts(),d.fire({position:"center",icon:"success",title:"產品數量已更新",showConfirmButton:!1,timer:1500}),this.loadingItem=""}).catch(p=>{console.error(p)})},delCartItem(s){this.loadingItem=s.id,this.$http.delete(`${h}/api/${u}/cart/${s.id}`).then(i=>{this.getCarts(),d.fire({position:"center",icon:"success",title:"成功刪除",confirmButtonColor:"#3085d6",showConfirmButton:!0,confirmButtonText:"確認"}),this.loadingItem=""}).catch(i=>{console.error(i)})},deleteAll(){d.fire({title:"確定要清空購物車?",showDenyButton:!0,confirmButtonText:"確認清空",denyButtonText:"取消"}).then(s=>{s.isConfirmed?this.$http.delete(`${h}/api/${u}/carts`).then(()=>{this.getCarts(),d.fire({position:"center",icon:"success",title:"購物車已全部刪除",showConfirmButton:!0,confirmButtonText:"確認"})}).catch(i=>alert(i.response.data.message)):s.isDenied&&d.fire("留著好了","","info")})},changeLoading(s){this.loadingItem=s}},mounted(){this.getCarts(),this.isLoading=!0}},L=t("img",{src:A,alt:"Loading..."},null,-1),P=I('<div class="container"><div class="row"><ol class="list my-5"><li class="active"><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-1-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"></path></svg> 購物清單 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-2-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24v.07H5.375v-.064c0-1.213.879-2.402 2.637-2.402 1.582 0 2.613.949 2.613 2.215 0 1.002-.6 1.667-1.287 2.43l-.096.107-1.974 2.22v.077h3.498V12H5.422v-.832l2.97-3.293c.434-.475.903-1.008.903-1.705 0-.744-.557-1.236-1.313-1.236-.843 0-1.336.615-1.336 1.306Z"></path></svg> 填寫資訊 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-3-circle" viewBox="0 0 16 16"><path d="M7.918 8.414h-.879V7.342h.838c.78 0 1.348-.522 1.342-1.237 0-.709-.563-1.195-1.348-1.195-.79 0-1.312.498-1.348 1.055H5.275c.036-1.137.95-2.115 2.625-2.121 1.594-.012 2.608.885 2.637 2.062.023 1.137-.885 1.776-1.482 1.875v.07c.703.07 1.71.64 1.734 1.917.024 1.459-1.277 2.396-2.93 2.396-1.705 0-2.707-.967-2.754-2.144H6.33c.059.597.68 1.06 1.541 1.066.973.006 1.6-.563 1.588-1.354-.006-.779-.621-1.318-1.541-1.318Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Z"></path></svg> 完成訂單 </li></ol></div></div>',1),S={key:0,class:"text-center"},$=t("p",{style:{"font-size":"30px"},class:"my-5"},"購物車內還沒有商品，快去選購吧！",-1),E={key:1,class:"container"},M={class:"row mt-5"},N={class:"col12"},Z={class:"text-end my-3"},D=["disabled"],H={key:0},U={class:"col overflow-hidden"},q=["src","alt"],R={class:"col-8"},j={class:"fs-7 fs-md-5 mb-2"},z={class:"fs-8 fs-md-7 mb-1 text-truncate-2 text-neutral-700"},F={class:"d-flex justify-content-between align-items-center"},O={key:0,class:"text-primary fs-md-6"},G=t("span",{class:"fs-9 fs-md-8"},"NT$ ",-1),J={key:1,class:"text-primary fs-md-6"},K=t("span",{class:"fs-9 fs-md-8"},"NT$ ",-1),Q={class:"fs-9 fs-md-8"},W=t("span",{class:"text-neutral-500"},"NT$ ",-1),X={class:"col d-flex justify-content-end align-items-center"},Y={class:"input-group input-group-sm"},tt=["onUpdate:modelValue","disabled","onChange"],st=["value"],et=["disabled","onClick"],ot=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),it={key:1,class:"text-end"},nt={class:"fs-6 fw-bold"},ct={class:"text-end"};function at(s,i,p,lt,o,_){const y=b("loading"),v=b("router-link");return n(),c(m,null,[f(y,{active:o.isLoading,"onUpdate:active":i[0]||(i[0]=e=>o.isLoading=e),"can-cancel":!1,color:s.color,"on-cancel":s.onCancel,"is-full-page":o.fullPage},{default:g(()=>[L]),_:1},8,["active","color","on-cancel","is-full-page"]),P,o.cartStatus?(n(),c("div",E,[t("div",M,[t("div",N,[t("div",Z,[t("button",{class:"btn btn-outline-danger",type:"button",disabled:!o.cartStatus,onClick:i[1]||(i[1]=e=>_.deleteAll())}," 清空購物車 ",8,D)]),o.cart.carts?(n(),c("ul",H,[(n(!0),c(m,null,w(o.cart.carts,e=>(n(),c("li",{key:e.id,class:"product-item row align-items-center gx-4 border-bottom mb-6 pb-6"},[t("div",U,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"object-cover w-100",style:{"max-height":"150px"}},null,8,q)]),t("div",R,[t("h4",j,r(e.product.title),1),t("p",z,r(e.product.description),1),t("div",F,[t("div",null,[e.product.origin_price===e.product.price?(n(),c("p",O,[G,l(r(e.product.price),1)])):(n(),c("p",J,[K,l(r(e.product.price)+" ",1),t("p",Q,[W,l(r(e.total),1)])]))])])]),t("div",X,[t("div",Y,[k(t("select",{name:"",id:"",class:"text-center",style:{width:"48px"},"onUpdate:modelValue":a=>e.qty=a,disabled:e.id===o.loadingItem,onChange:a=>_.updatedCartItem(e)},[(n(),c(m,null,w(20,a=>t("option",{value:a,key:`${a}+'12345'`},r(a),9,st)),64))],40,tt),[[B,e.qty]]),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===o.loadingItem,onClick:a=>_.delCartItem(e)},[ot,l(" 刪除 ")],8,et)])])]))),128))])):x("",!0),o.cart.total===o.cart.final_total?(n(),c("div",it,[t("p",nt,[l(" 總計: "),t("span",null,"NT$ "+r(o.cart.total),1)])])):x("",!0)]),t("div",ct,[f(v,{class:"btn btn-outline-primary",to:"/subscriber"},{default:g(()=>[l("下一步")]),_:1})])])])):(n(),c("div",S,[$,f(v,{class:"btn btn-primary",to:"/products"},{default:g(()=>[l("美甲款式")]),_:1})]))],64)}const pt=C(T,[["render",at]]);export{pt as default};
