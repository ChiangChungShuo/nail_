import{g as c,h as a}from"./index-025db92b.js";import{S as o}from"./sweetalert2.all-6acaa431.js";const{VITE_APP_URL:i,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/nail_",MODE:"production",DEV:!1,PROD:!0},h=c("cart",{state:()=>({carts:[],total:0,final_total:0}),actions:{getCart(){a.get(`${i}/api/${r}/cart`).then(t=>{this.carts=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total}).catch(t=>{console.error(t)})},addToCart(t,e=1){const s={data:{product_id:t,qty:e}};a.post(`${i}/api/${r}/cart`,s).then(n=>{o.fire({position:"center",icon:"success",title:"成功加入購物車",showConfirmButton:!0,confirmButtonText:"確認"}),this.getCart()}).catch(n=>{console.error(n)})}},updatedCartItem(t){const e={product_id:t.product.id,qty:t.qty};this.loadingItem=t.id,a.put(`${i}/api/${r}/cart/${t.id}`,{data:e}).then(s=>{o.fire({position:"center",icon:"success",title:"產品數量已更新",showConfirmButton:!1,timer:1500}),this.loadingItem="",this.getCarts()}).catch(s=>{console.error(s)})},delCartItem(t){this.loadingItem=t.id,a.delete(`${i}/api/${r}/cart/${t.id}`).then(e=>{o.fire({position:"center",icon:"success",title:"成功刪除",showConfirmButton:!0,confirmButtonText:"確認"}),this.loadingItem="",this.getCart()}).catch(e=>{console.error(e)})},deleteAll(){o.fire({title:"確定要清空購物車?",showDenyButton:!0,confirmButtonText:"確認清空",denyButtonText:"取消"}).then(t=>{t.isConfirmed?a.delete(`${i}/api/${r}/carts`).then(()=>{o.fire({position:"center",icon:"success",title:"購物車已全部刪除",showConfirmButton:!0,confirmButtonText:"確認"}),this.getCart()}).catch(e=>alert(e.response.data.message)):t.isDenied&&o.fire("留著好了","","info")})},changeLoading(t){this.loadingItem=t}});export{h as c};
