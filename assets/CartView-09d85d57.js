/* empty css                 */import{S as c}from"./sweetalert2.all-f521015d.js";import{_ as x,y as C,r as g,o as a,c as l,b as m,a as t,F as _,t as v,z as y,u as r,w as V,d as I,e as f,A,B}from"./index-8f52f471.js";const{VITE_APP_URL:d,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/weekk66",MODE:"production",DEV:!1,PROD:!0},k={data(){return{products:[],productId:"",cart:{},cartStatus:!1,isLoading:!1,loadingItem:""}},methods:{getCarts(){this.$http.get(`${d}/api/${h}/cart`).then(e=>{this.cart=e.data.data,this.cart.carts.length===0?this.cartStatus=!1:this.cartStatus=!0}).catch(e=>{console.error(e)})},updatedCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${d}/api/${h}/cart/${e.id}`,{data:o}).then(u=>{this.getCarts(),c.fire({position:"center",icon:"success",title:"產品數量已更新",showConfirmButton:!1,timer:1500}),this.loadingItem=""}).catch(u=>{console.error(u)})},delCartItem(e){this.loadingItem=e.id,this.$http.delete(`${d}/api/${h}/cart/${e.id}`).then(o=>{this.getCarts(),c.fire({position:"center",icon:"success",title:"成功刪除",showConfirmButton:!0,confirmButtonText:"確認"}),this.loadingItem=""}).catch(o=>{console.error(o)})},deleteAll(){c.fire({title:"確定要清空購物車?",showDenyButton:!0,confirmButtonText:"確認清空",denyButtonText:"取消"}).then(e=>{e.isConfirmed?C.delete(`${d}/api/${h}/carts`).then(()=>{this.getCarts(),c.fire({position:"center",icon:"success",title:"購物車已全部刪除",showConfirmButton:!0,confirmButtonText:"確認"})}).catch(o=>alert(o.response.data.message)):e.isDenied&&c.fire("留著好了","","info")})},changeLoading(e){this.loadingItem=e}},mounted(){this.getCarts(),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)}},L=I('<div class="container"><div class="row"><ol class="list mt-5"><li class="active"><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-1-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"></path></svg> 購物清單 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-2-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24v.07H5.375v-.064c0-1.213.879-2.402 2.637-2.402 1.582 0 2.613.949 2.613 2.215 0 1.002-.6 1.667-1.287 2.43l-.096.107-1.974 2.22v.077h3.498V12H5.422v-.832l2.97-3.293c.434-.475.903-1.008.903-1.705 0-.744-.557-1.236-1.313-1.236-.843 0-1.336.615-1.336 1.306Z"></path></svg> 填寫資訊 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-3-circle" viewBox="0 0 16 16"><path d="M7.918 8.414h-.879V7.342h.838c.78 0 1.348-.522 1.342-1.237 0-.709-.563-1.195-1.348-1.195-.79 0-1.312.498-1.348 1.055H5.275c.036-1.137.95-2.115 2.625-2.121 1.594-.012 2.608.885 2.637 2.062.023 1.137-.885 1.776-1.482 1.875v.07c.703.07 1.71.64 1.734 1.917.024 1.459-1.277 2.396-2.93 2.396-1.705 0-2.707-.967-2.754-2.144H6.33c.059.597.68 1.06 1.541 1.066.973.006 1.6-.563 1.588-1.354-.006-.779-.621-1.318-1.541-1.318Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Z"></path></svg> 完成訂單 </li></ol></div></div>',1),T={key:0,class:"text-center"},P=t("p",{style:{"font-size":"30px"},class:"my-5"},"購物車內還沒有商品，快去選購吧！",-1),S=[P],M={key:1,class:"container"},Z={class:"row"},$={class:"col col-md-12"},E={class:"text-end"},D=["disabled"],H={class:"table align-middle my-5",style:{"border-style":"solid","border-width":"10px"}},U=t("thead",null,[t("tr",null,[t("th"),t("th",null,"圖片"),t("th",null,"品名"),t("th",{style:{width:"50px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計")])],-1),N=["disabled","onClick"],q=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),R=["src"],z={class:"input-group input-group-sm"},F=["onUpdate:modelValue","disabled","onChange"],O=["value"],j={class:"text-end"},G={class:"text-end"},J=t("td",{colspan:"5",class:"text-end"},"總計",-1),K={class:"text-end"},Q={class:"text-end"};function W(e,o,u,X,i,p){const b=g("VueLoading"),w=g("router-link");return a(),l(_,null,[m(b,{active:i.isLoading,"onUpdate:active":o[0]||(o[0]=s=>i.isLoading=s)},null,8,["active"]),L,i.cartStatus?(a(),l("div",M,[t("div",Z,[t("div",$,[t("div",E,[t("button",{class:"btn btn-outline-danger mt-5",type:"button",disabled:!i.cartStatus,onClick:o[1]||(o[1]=s=>p.deleteAll())}," 清空購物車 ",8,D)]),t("table",H,[U,t("tbody",null,[i.cart.carts?(a(!0),l(_,{key:0},v(i.cart.carts,s=>(a(),l("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:s.id===i.loadingItem,onClick:n=>p.delCartItem(s)},[q,f(" x ")],8,N)]),t("td",null,[t("img",{src:s.product.imageUrl,width:"80",alt:""},null,8,R)]),t("td",null,r(s.product.title),1),t("td",null,[t("div",z,[A(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":n=>s.qty=n,disabled:s.id===i.loadingItem,onChange:n=>p.updatedCartItem(s)},[(a(),l(_,null,v(20,n=>t("option",{value:n,key:`${n}+'12345'`},r(n),9,O)),64))],40,F),[[B,s.qty]])])]),t("td",j,r(s.product.price),1),t("td",G,r(s.total),1)]))),128)):y("",!0)]),t("tfoot",null,[t("tr",null,[J,t("td",K,r(i.cart.total),1)])])]),t("div",Q,[m(w,{class:"btn btn-outline-primary",to:"/subscriber"},{default:V(()=>[f("下一步")]),_:1})])])])])):(a(),l("div",T,S))],64)}const st=x(k,[["render",W]]);export{st as default};
