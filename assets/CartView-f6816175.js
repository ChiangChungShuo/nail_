/* empty css                 */import{S as d}from"./sweetalert2.all-21c8a891.js";import{_ as y,y as w,r as m,o as c,c as n,b as v,a as t,F as h,u as g,z as C,t as i,w as V,d as T,e as b,A as I,B as k}from"./index-03a2923e.js";const{VITE_APP_URL:u,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/weekk66",MODE:"production",DEV:!1,PROD:!0},A={data(){return{products:[],productId:"",cart:{},cartStatus:!1,isLoading:!1,loadingItem:""}},methods:{getCarts(){this.$http.get(`${u}/api/${_}/cart`).then(e=>{this.cart=e.data.data,this.cart.carts.length===0?this.cartStatus=!1:this.cartStatus=!0}).catch(e=>{console.error(e)})},updatedCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${u}/api/${_}/cart/${e.id}`,{data:o}).then(r=>{console.log("更新購物車",r.data),this.getCarts(),d.fire({position:"center",icon:"success",title:"產品數量已更新",showConfirmButton:!1,timer:1500}),this.loadingItem=""}).catch(r=>{console.error(r)})},delCartItem(e){this.loadingItem=e.id,this.$http.delete(`${u}/api/${_}/cart/${e.id}`).then(o=>{this.getCarts(),d.fire({position:"center",icon:"success",title:"成功刪除",showConfirmButton:!0,confirmButtonText:"確認"}),this.loadingItem=""}).catch(o=>{console.error(o)})},deleteAll(){d.fire({title:"確定要清空購物車?",showDenyButton:!0,confirmButtonText:"確認清空",denyButtonText:"取消"}).then(e=>{e.isConfirmed?w.delete(`${u}/api/${_}/carts`).then(()=>{this.getCarts(),d.fire({position:"center",icon:"success",title:"購物車已全部刪除",showConfirmButton:!0,confirmButtonText:"確認"})}).catch(o=>alert(o.response.data.message)):e.isDenied&&d.fire("留著好了","","info")})},changeLoading(e){this.loadingItem=e}},mounted(){this.getCarts(),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)}},B=T('<div class="container"><div class="row"><ol class="list my-5"><li class="active"><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-1-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"></path></svg> 購物清單 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-2-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24v.07H5.375v-.064c0-1.213.879-2.402 2.637-2.402 1.582 0 2.613.949 2.613 2.215 0 1.002-.6 1.667-1.287 2.43l-.096.107-1.974 2.22v.077h3.498V12H5.422v-.832l2.97-3.293c.434-.475.903-1.008.903-1.705 0-.744-.557-1.236-1.313-1.236-.843 0-1.336.615-1.336 1.306Z"></path></svg> 填寫資訊 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-3-circle" viewBox="0 0 16 16"><path d="M7.918 8.414h-.879V7.342h.838c.78 0 1.348-.522 1.342-1.237 0-.709-.563-1.195-1.348-1.195-.79 0-1.312.498-1.348 1.055H5.275c.036-1.137.95-2.115 2.625-2.121 1.594-.012 2.608.885 2.637 2.062.023 1.137-.885 1.776-1.482 1.875v.07c.703.07 1.71.64 1.734 1.917.024 1.459-1.277 2.396-2.93 2.396-1.705 0-2.707-.967-2.754-2.144H6.33c.059.597.68 1.06 1.541 1.066.973.006 1.6-.563 1.588-1.354-.006-.779-.621-1.318-1.541-1.318Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Z"></path></svg> 完成訂單 </li></ol></div></div>',1),L={key:0,class:"text-center"},$=t("p",{style:{"font-size":"30px"},class:"my-5"},"購物車內還沒有商品，快去選購吧！",-1),N=[$],P={key:1,class:"container"},S={class:"row mt-5"},M={class:"col-md-6"},Z={class:"text-end my-3"},E=["disabled"],U={class:"table align-middle"},D=t("thead",null,[t("tr",null,[t("th"),t("th",null,"圖片"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計")])],-1),H=["disabled","onClick"],q=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),j=["src"],z={class:"input-group input-group-sm"},R=["onUpdate:modelValue","disabled","onChange"],F=["value"],O={class:"text-end"},X={class:"text-end"},G=t("td",{colspan:"5",class:"text-end"},"總計",-1),J={class:"text-end"},K={class:"col-md-6 my-5"},Q={class:"card rounded-0",style:{"border-color":"#4e6752"}},W=t("div",{class:"card-header border-bottom-0 bg-white px-4 py-4"},[t("h3",null,"訂單詳情")],-1),Y={class:"card-body mt-3 px-4 py-0"},tt={class:"list-group-item px-0",style:{"border-bottom-color":"#4e6752","border-bottom-width":"1px"}},st={class:"d-flex mt-2"},et=["src"],ot={class:"w-100 d-flex flex-column"},lt={class:"d-flex justify-content-between fw-bold"},it={class:"mb-0"},ct={class:"d-flex justify-content-between mt-auto"},nt={class:"text-muted mb-0"},at={class:"mb-0"},dt={class:"list-group-item px-0 pb-0"},rt={class:"table text-muted"},ht=t("h3",{style:{color:"#0a0a0a"}},"總價",-1),ut={class:"text-end border-0 px-0",style:{"font-size":"25px",color:"#4e6752"}},_t={class:"text-end"};function pt(e,o,r,gt,l,p){const f=m("VueLoading"),x=m("router-link");return c(),n(h,null,[v(f,{active:l.isLoading,"onUpdate:active":o[0]||(o[0]=s=>l.isLoading=s)},null,8,["active"]),B,l.cartStatus?(c(),n("div",P,[t("div",S,[t("div",M,[t("div",Z,[t("button",{class:"btn btn-outline-danger",type:"button",disabled:!l.cartStatus,onClick:o[1]||(o[1]=s=>p.deleteAll())}," 清空購物車 ",8,E)]),t("table",U,[D,t("tbody",null,[l.cart.carts?(c(!0),n(h,{key:0},g(l.cart.carts,s=>(c(),n("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:s.id===l.loadingItem,onClick:a=>p.delCartItem(s)},[q,b(" x ")],8,H)]),t("td",null,[t("img",{style:{width:"100px",height:"100px"},src:s.product.imageUrl,alt:"",class:"object-cover"},null,8,j)]),t("td",null,i(s.product.title),1),t("td",null,[t("div",z,[I(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>s.qty=a,disabled:s.id===l.loadingItem,onChange:a=>p.updatedCartItem(s)},[(c(),n(h,null,g(20,a=>t("option",{value:a,key:`${a}+'12345'`},i(a),9,F)),64))],40,R),[[k,s.qty]])])]),t("td",O,"NT$"+i(s.product.price),1),t("td",X,"NT$"+i(s.total),1)]))),128)):C("",!0)]),t("tfoot",null,[t("tr",null,[G,t("td",J,"NT$"+i(l.cart.total),1)])])])]),t("div",K,[t("div",Q,[W,t("div",Y,[(c(!0),n(h,null,g(l.cart.carts,s=>(c(),n("ul",{class:"list-group list-group-flush",key:s.id},[t("li",tt,[t("div",st,[t("img",{src:s.product.imageUrl,class:"me-2",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,et),t("div",ot,[t("div",lt,[t("h5",null,i(s.product.title),1),t("p",it,"X"+i(s.qty),1)]),t("div",ct,[t("p",nt,[t("small",null,"NT$ "+i(s.product.price),1)]),t("p",at,"NT$"+i(s.total),1)])])])])]))),128)),t("li",dt,[t("table",rt,[t("tbody",null,[t("tr",null,[ht,t("td",ut," NT$ "+i(l.cart.total),1)])])])])])])]),t("div",_t,[v(x,{class:"btn btn-outline-primary",to:"/subscriber"},{default:V(()=>[b("下一步")]),_:1})])])])):(c(),n("div",L,N))],64)}const ft=y(A,[["render",pt]]);export{ft as default};
