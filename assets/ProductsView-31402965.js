import{_ as w,y as B,L as E,a as m,m as f,r as u,o as i,c,b as t,F as _,z as v,d as P,w as b,A as C,B as S,e as M,C as x,D as h,t as l,f as r}from"./index-bbd52964.js";import{S as D}from"./sweetalert2.all-44539e07.js";import{c as k}from"./collect-3d9510a2.js";import{P as F}from"./PaginationModal-e84b83fd.js";import{c as y}from"./cart-db828cb2.js";/* empty css            */import{_ as N}from"./loading-8b169b66.js";const{VITE_APP_URL:A,VITE_APP_PATH:L}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/nail_",MODE:"production",DEV:!1,PROD:!0},R={data(){return{isLoading:!1,products:[],filteredProducts:0,page:{},categorys:["所有樣式","單色","跳色","漸層","暈染","指定款"],isActive:"所有樣式"}},components:{RouterLink:B,PaginationModal:F,Loading:E},methods:{getProducts(e=1){this.$http.get(`${A}/api/${L}/products?page=${e}`).then(o=>{this.products=o.data.products,this.isLoading=!1,this.page=o.data.pagination,this.filterProducts(this.isActive)}).catch(o=>{console.error(o)})},addToCart(e,o=1){const g={product_id:e,qty:o};this.$http.post(`${A}/api/${L}/cart`,{data:g}).then(d=>{D.fire({position:"center",icon:"success",title:"成功加入購物車",showConfirmButton:!0,confirmButtonColor:"#7C9C81",confirmButtonText:"確認"})}).catch(d=>{console.error(d)})},filterProducts(e){e==="所有樣式"?(this.filteredProducts=this.products,this.filteredPages=this.page.total_pages):(this.filteredProducts=this.products.filter(o=>o.category===e),this.filteredPages=Math.ceil(this.filteredProducts.length/12))},...m(y,["addToCart","getCarts"]),...m(k,["addToCollect","getCollects","removeCollect"])},computed:{isFav(){return e=>this.collects.filter(o=>o.id===e).length},productsFiltered(){return this.isActive==="所有樣式"?this.products:this.products.filter(e=>e.category===this.isActive)},...f(y,["state"]),...f(k,["collects"])},mounted(){this.getCollects(),this.getProducts(),this.isLoading=!0}},U={class:"container"},I=M('<nav aria-label="breadcrumb" class="mt-3"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#">首頁</a></li><li class="breadcrumb-item active" aria-current="page">美甲款式</li></ol></nav>',1),z={class:"row mt-5"},j={class:"col-md-2"},H=["onClick"],O={class:"col-md-10"},q={class:"row g-4",style:{width:"100%"}},G=t("img",{src:N,alt:"Loading..."},null,-1),J={class:"card",style:{border:"0.5px solid #3f5d45"}},K=["src"],Q=t("span",null,"詳細資訊",-1),W={class:"card-body"},X={class:"card-title"},Y={class:"card-text"},Z=t("br",null,null,-1),$={class:"d-flex justify-content-between"},tt=["onClick"],et=t("i",{class:"bi bi-heart"},null,-1),st=["onClick"],ot=t("i",{class:"bi bi-heart"},null,-1),it=["onClick"];function at(e,o,g,d,a,n){const T=u("loading"),V=u("router-link"),p=u("PaginationModal");return i(),c("div",U,[I,t("div",z,[t("div",j,[(i(!0),c(_,null,v(a.categorys,s=>(i(),c("div",{class:"list-group",key:s},[t("button",{class:x(["list-group-item list-group-item-action",{active:a.isActive===s}]),type:"button",onClick:h(()=>{a.isActive=s,n.filterProducts(s)},["prevent"])},l(s),11,H)]))),128))]),t("div",O,[t("div",q,[P(T,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=s=>a.isLoading=s),"can-cancel":!1,color:e.color,"on-cancel":e.onCancel,"is-full-page":e.fullPage},{default:b(()=>[G]),_:1},8,["active","color","on-cancel","is-full-page"]),(i(!0),c(_,null,v(a.filteredProducts,s=>(i(),c("div",{class:"col-md-4 col-sm-6",key:s.id},[t("div",J,[P(V,{class:"products-img",role:"button",to:`/product/${s.id}`},{default:b(()=>[t("img",{src:s.imageUrl,class:"card-img-top object-cover",style:{height:"350px"}},null,8,K),Q]),_:2},1032,["to"]),t("div",W,[t("h5",X,l(s.title),1),t("p",Y,[r(l(s.description)+" ",1),Z,r(" "+l(s.content),1)]),t("div",$,[t("div",null,[n.isFav(s.id)?(i(),c("button",{key:1,type:"button",class:"btn btn-success",onClick:h(()=>e.removeCollect(s),["prevent"])},[ot,r(" 已收藏 ")],8,st)):(i(),c("button",{key:0,type:"button",class:"btn btn-outline-success",onClick:h(()=>e.addToCollect(s),["prevent"])},[et,r(" 加入收藏 ")],8,tt))]),t("div",null,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:ct=>n.addToCart(s.id)}," 加入購物車 ",8,it)])])])])]))),128)),a.isActive==="所有樣式"?(i(),C(p,{key:0,pages:a.page,onChangePage:n.getProducts},null,8,["pages","onChangePage"])):(i(),c(_,{key:1},[e.filteredPages>1?(i(),C(p,{key:0,pages:e.filteredPages,onChangePage:n.getProducts},null,8,["pages","onChangePage"])):S("",!0)],64))])])])])}const gt=w(R,[["render",at]]);export{gt as default};
