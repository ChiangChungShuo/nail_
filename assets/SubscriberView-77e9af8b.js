/* empty css                 */import{S as r}from"./sweetalert2.all-d856edd8.js";import{_ as x,h as w,r as _,o as f,c as b,b as e,F as V,z as y,t as n,d as a,w as C,e as B,A as h,E as T,J as A}from"./index-f258c36f.js";const{VITE_APP_URL:c,VITE_APP_PATH:d}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/nail_",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],productId:"",cart:{},cartStatus:!1,isLoading:!1,loadingItem:"",user:{email:"",name:"",tel:"",address:""},message:""}},methods:{getCarts(){this.$http.get(`${c}/api/${d}/cart`).then(t=>{this.cart=t.data.data,this.cart.carts.length===0?this.cartStatus=!1:this.cartStatus=!0}).catch(t=>{console.error(t)})},updatedCartItem(t){const s={product_id:t.product.id,qty:t.qty};this.loadingItem=t.id,this.$http.put(`${c}/api/${d}/cart/${t.id}`,{data:s}).then(p=>{this.getCarts(),r.fire({position:"center",icon:"success",title:"產品數量已更新",showConfirmButton:!1,timer:1500}),this.loadingItem=""}).catch(p=>{console.error(p)})},delCartItem(t){this.loadingItem=t.id,this.$http.delete(`${c}/api/${d}/cart/${t.id}`).then(s=>{this.getCarts(),r.fire({position:"center",icon:"success",title:"成功刪除",showConfirmButton:!0,confirmButtonText:"確認"}),this.loadingItem=""}).catch(s=>{console.error(s)})},deleteAll(){r.fire({title:"確定要清空購物車?",showDenyButton:!0,confirmButtonText:"確認清空",denyButtonText:"取消"}).then(t=>{t.isConfirmed?w.delete(`${c}/api/${d}/carts`).then(()=>{this.getCarts(),r.fire({position:"center",icon:"success",title:"購物車已全部刪除",showConfirmButton:!0,confirmButtonText:"確認"})}).catch(s=>alert(s.response.data.message)):t.isDenied&&r.fire("留著好了","","info")})},changeLoading(t){this.loadingItem=t},onSubmit(){const t={user:this.user,message:this.message};if(this.cart.carts.length===0){alert("購物車內還沒有商品唷～");return}this.$http.post(`${c}/api/${d}/order`,{data:t}).then(s=>{r.fire({position:"center",icon:"success",title:"成功送出訂單",showConfirmButton:!0,confirmButtonText:"確認"}),this.$refs.form.resetForm(),this.getCarts(),this.message="",this.$router.push("/finish")}).catch(s=>{alert(s.response.data.message)})},isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"}},mounted(){this.getCarts(),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)}},P={class:"container"},S={class:"row my-5 justify-content-center"},$=B('<ol class="list"><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-1-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"></path></svg> 購物清單 </li><li class="active"><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-2-circle" viewBox="0 0 16 16"><path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24v.07H5.375v-.064c0-1.213.879-2.402 2.637-2.402 1.582 0 2.613.949 2.613 2.215 0 1.002-.6 1.667-1.287 2.43l-.096.107-1.974 2.22v.077h3.498V12H5.422v-.832l2.97-3.293c.434-.475.903-1.008.903-1.705 0-.744-.557-1.236-1.313-1.236-.843 0-1.336.615-1.336 1.306Z"></path></svg> 填寫資訊 </li><li><svg xmlns="http://www.w3.org/2000/svg" height="25" fill="currentColor" class="bi bi-3-circle" viewBox="0 0 16 16"><path d="M7.918 8.414h-.879V7.342h.838c.78 0 1.348-.522 1.342-1.237 0-.709-.563-1.195-1.348-1.195-.79 0-1.312.498-1.348 1.055H5.275c.036-1.137.95-2.115 2.625-2.121 1.594-.012 2.608.885 2.637 2.062.023 1.137-.885 1.776-1.482 1.875v.07c.703.07 1.71.64 1.734 1.917.024 1.459-1.277 2.396-2.93 2.396-1.705 0-2.707-.967-2.754-2.144H6.33c.059.597.68 1.06 1.541 1.066.973.006 1.6-.563 1.588-1.354-.006-.779-.621-1.318-1.541-1.318Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Z"></path></svg> 完成訂單 </li></ol>',1),E={class:"col-md-6 my-5"},L={class:"card rounded-0",style:{"border-color":"#4e6752"}},M=e("div",{class:"card-header border-bottom-0 bg-white px-4 py-4"},[e("h3",null,"訂單詳情")],-1),U={class:"card-body mt-3 px-4 py-0"},Z={class:"list-group-item px-0",style:{"border-bottom-color":"#4e6752","border-bottom-width":"1px"}},k={class:"d-flex mt-2"},N=["src"],D={class:"w-100 d-flex flex-column"},H={class:"d-flex justify-content-between fw-bold"},q={class:"mb-0"},j={class:"d-flex justify-content-between mt-auto"},z={class:"text-muted mb-0"},R={class:"mb-0"},F={class:"list-group-item px-0 pb-0"},O={class:"table text-muted"},J=e("h3",{style:{color:"#0a0a0a"}},"總價",-1),X={class:"text-end border-0 px-0",style:{"font-size":"25px",color:"#4e6752"}},G={class:"mb-3"},K=e("label",{for:"email",class:"form-label"},"Email",-1),Q={class:"mb-3"},W=e("label",{for:"name",class:"form-label"},"姓名",-1),Y={class:"mb-3"},ee=e("label",{for:"tel",class:"form-label"},"電話",-1),te={class:"mb-3"},se=e("label",{for:"address",class:"form-label"},"地址",-1),oe={class:"mb-3"},le=e("label",{for:"message",class:"form-label"},"留言",-1),ie=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function ae(t,s,p,re,o,g){const m=_("v-field"),u=_("error-message"),v=_("v-form");return f(),b("div",P,[e("div",S,[$,e("div",E,[e("div",L,[M,e("div",U,[(f(!0),b(V,null,y(o.cart.carts,l=>(f(),b("ul",{class:"list-group list-group-flush",key:l.id},[e("li",Z,[e("div",k,[e("img",{src:l.product.imageUrl,class:"me-2",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,N),e("div",D,[e("div",H,[e("h5",null,n(l.product.title),1),e("p",q,"X"+n(l.qty),1)]),e("div",j,[e("p",z,[e("small",null,"NT$ "+n(l.product.price),1)]),e("p",R,"NT$"+n(l.total),1)])])])])]))),128)),e("li",F,[e("table",O,[e("tbody",null,[e("tr",null,[J,e("td",X," NT$ "+n(o.cart.total),1)])])])])])])]),a(v,{ref:"form",class:"col-md-6 mt-5",onSubmit:g.onSubmit},{default:C(({errors:l})=>[e("div",G,[K,a(m,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:o.user.email,"onUpdate:modelValue":s[0]||(s[0]=i=>o.user.email=i)},null,8,["class","modelValue"]),a(u,{name:"email",class:"invalid-feedback"})]),e("div",Q,[W,a(m,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":s[1]||(s[1]=i=>o.user.name=i)},null,8,["class","modelValue"]),a(u,{name:"姓名",class:"invalid-feedback"})]),e("div",Y,[ee,a(m,{id:"tel",name:"電話",type:"tel",class:h(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:g.isPhone,modelValue:o.user.tel,"onUpdate:modelValue":s[2]||(s[2]=i=>o.user.tel=i)},null,8,["rules","class","modelValue"]),a(u,{name:"電話",class:"invalid-feedback"})]),e("div",te,[se,a(m,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":s[3]||(s[3]=i=>o.user.address=i)},null,8,["class","modelValue"]),a(u,{name:"地址",class:"invalid-feedback"})]),e("div",oe,[le,T(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=i=>o.user.message=i)},null,512),[[A,o.user.message]])]),ie]),_:1},8,["onSubmit"])])])}const me=x(I,[["render",ae]]);export{me as default};
