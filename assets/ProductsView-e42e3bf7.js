import{_ as V,y as B,L as E,a as m,m as g,r as u,o as i,c as n,b as t,F as v,z as b,d as _,w as f,e as S,A as x,B as p,t as l,f as r}from"./index-f258c36f.js";import{S as F}from"./sweetalert2.all-d856edd8.js";import{c as C}from"./collect-00c72ab7.js";import{P as M}from"./PaginationModal-0446ed8b.js";import{c as P}from"./cart-07e8f437.js";/* empty css            */import{_ as R}from"./loading-8b169b66.js";const{VITE_APP_URL:k,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"azraelk",BASE_URL:"/nail_",MODE:"production",DEV:!1,PROD:!0},U={data(){return{isLoading:!1,products:[],page:{},categorys:["所有樣式","單色","跳色","漸層","暈染","指定款"],isActive:"所有樣式"}},components:{RouterLink:B,PaginationModal:M,Loading:E},methods:{getProducts(s=1){this.$http.get(`${k}/api/${y}/products?page=${s}`).then(o=>{this.products=o.data.products,this.isLoading=!1,this.page=o.data.pagination}).catch(o=>{console.error(o)})},addToCart(s,o=1){const h={product_id:s,qty:o};this.$http.post(`${k}/api/${y}/cart`,{data:h}).then(d=>{F.fire({position:"center",icon:"success",title:"成功加入購物車",showConfirmButton:!0,confirmButtonColor:"#7C9C81",confirmButtonText:"確認"})}).catch(d=>{console.error(d)})},...m(P,["addToCart","getCarts"]),...m(C,["addToCollect","getCollects","removeCollect"])},computed:{isFav(){return s=>this.collects.filter(o=>o.id===s).length},productsFiltered(){return this.isActive==="所有樣式"?this.products:this.products.filter(s=>s.category===this.isActive)},...g(P,["state"]),...g(C,["collects"])},mounted(){this.getCollects(),this.getProducts(),this.isLoading=!0}},D={class:"container"},I=S('<nav aria-label="breadcrumb" class="mt-3"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#">首頁</a></li><li class="breadcrumb-item active" aria-current="page">美甲款式</li></ol></nav>',1),N={class:"row mt-5"},$={class:"col-md-2"},z=["onClick"],j={class:"col-md-10"},H={class:"row g-4",style:{width:"100%"}},O=t("img",{src:R,alt:"Loading..."},null,-1),q={class:"card",style:{border:"0.5px solid #3f5d45"}},G=["src"],J=t("span",null,"詳細資訊",-1),K={class:"card-body"},Q={class:"card-title"},W={class:"card-text"},X=t("br",null,null,-1),Y={class:"d-flex justify-content-between"},Z=["onClick"],tt=t("i",{class:"bi bi-heart"},null,-1),et=["onClick"],st=t("i",{class:"bi bi-heart"},null,-1),ot=["onClick"];function it(s,o,h,d,a,c){const A=u("loading"),L=u("router-link"),T=u("PaginationModal");return i(),n("div",D,[I,t("div",N,[t("div",$,[(i(!0),n(v,null,b(a.categorys,e=>(i(),n("div",{class:"list-group",key:e},[t("button",{class:x(["list-group-item list-group-item-action",{active:a.isActive===e}]),type:"button",onClick:p(w=>a.isActive=e,["prevent"])},l(e),11,z)]))),128))]),t("div",j,[t("div",H,[_(A,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e),"can-cancel":!1,color:s.color,"on-cancel":s.onCancel,"is-full-page":s.fullPage},{default:f(()=>[O]),_:1},8,["active","color","on-cancel","is-full-page"]),(i(!0),n(v,null,b(c.productsFiltered,e=>(i(),n("div",{class:"col-md-4 col-sm-6",key:e.id},[t("div",q,[_(L,{class:"products-img",role:"button",to:`/product/${e.id}`},{default:f(()=>[t("img",{src:e.imageUrl,class:"card-img-top object-cover",style:{height:"350px"}},null,8,G),J]),_:2},1032,["to"]),t("div",K,[t("h5",Q,l(e.title),1),t("p",W,[r(l(e.description)+" ",1),X,r(" "+l(e.content),1)]),t("div",Y,[t("div",null,[c.isFav(e.id)?(i(),n("button",{key:1,type:"button",class:"btn btn-success",onClick:p(()=>s.removeCollect(e),["prevent"])},[st,r(" 已收藏 ")],8,et)):(i(),n("button",{key:0,type:"button",class:"btn btn-outline-success",onClick:p(()=>s.addToCollect(e),["prevent"])},[tt,r(" 加入收藏 ")],8,Z))]),t("div",null,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:w=>c.addToCart(e.id)}," 加入購物車 ",8,ot)])])])])]))),128)),_(T,{pages:a.page,onChangePage:c.getProducts},null,8,["pages","onChangePage"])])])])])}const _t=V(U,[["render",it]]);export{_t as default};
